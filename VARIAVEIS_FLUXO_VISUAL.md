# ğŸ¨ Fluxo Visual - VariÃ¡veis de Ambiente

## ğŸ“± CenÃ¡rio 1: Desenvolvimento com Expo Go

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VocÃª roda: npm start                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Expo CLI carrega:                          â”‚
â”‚  ğŸ“„ .env                                    â”‚
â”‚  ğŸ“„ app.json                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Seu cÃ³digo (app.config.ts) lÃª:            â”‚
â”‚  âœ… EXPO_PUBLIC_API_URL                     â”‚
â”‚  âœ… EXPO_PUBLIC_ENV = "development"         â”‚
â”‚  âœ… EXPO_PUBLIC_DEBUG = "true"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± App no Expo Go                          â”‚
â”‚  âœ… API URL: santafe-dashboard.vercel.app   â”‚
â”‚  âœ… Logs habilitados                        â”‚
â”‚  âœ… Debug mode ativo                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULTADO: âœ… FUNCIONA PERFEITAMENTE
```

---

## ğŸ—ï¸ CenÃ¡rio 2: Build Completo (EAS Build)

### âŒ ANTES (sem configuraÃ§Ã£o):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VocÃª roda: eas build --platform android    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EAS Build lÃª:                              â”‚
â”‚  âŒ .env (IGNORADO!)                        â”‚
â”‚  ğŸ“„ app.json (sem variÃ¡veis)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Seu cÃ³digo (app.config.ts):               â”‚
â”‚  âš ï¸ EXPO_PUBLIC_API_URL = undefined         â”‚
â”‚  âš ï¸ Usa valor padrÃ£o do cÃ³digo              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± APK Gerado                              â”‚
â”‚  âš ï¸ Pode funcionar com fallback             â”‚
â”‚  âš ï¸ Mas nÃ£o Ã© ideal                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULTADO: âš ï¸ FUNCIONA MAS NÃƒO Ã‰ CONFIÃVEL
```

---

### âœ… AGORA (com app.json configurado):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VocÃª roda: eas build --platform android    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EAS Build lÃª:                              â”‚
â”‚  âŒ .env (IGNORADO!)                        â”‚
â”‚  âœ… app.json (COM variÃ¡veis!)               â”‚
â”‚     {                                        â”‚
â”‚       "extra": {                             â”‚
â”‚         "EXPO_PUBLIC_API_URL": "..."        â”‚
â”‚         "EXPO_PUBLIC_ENV": "production"     â”‚
â”‚       }                                      â”‚
â”‚     }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Seu cÃ³digo (app.config.ts) lÃª:            â”‚
â”‚  âœ… EXPO_PUBLIC_API_URL (do app.json)       â”‚
â”‚  âœ… EXPO_PUBLIC_ENV = "production"          â”‚
â”‚  âœ… EXPO_PUBLIC_DEBUG = "false"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± APK Gerado                              â”‚
â”‚  âœ… API URL: santafe-dashboard.vercel.app   â”‚
â”‚  âœ… Logs desabilitados (produÃ§Ã£o)           â”‚
â”‚  âœ… Debug desabilitado                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULTADO: âœ… FUNCIONA PERFEITAMENTE
```

---

## ğŸ”„ CenÃ¡rio 3: Update OTA (EAS Update)

### Seu comando:

```bash
npx eas update --branch preview --message "ajuste finalizaÃ§Ã£o de pedidos"
```

### O que acontece:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  eas update envia:                          â”‚
â”‚  âœ… CÃ³digo JavaScript atualizado            â”‚
â”‚  âœ… Componentes React Native                â”‚
â”‚  âœ… Assets (imagens, fonts)                 â”‚
â”‚  âŒ NÃƒO envia variÃ¡veis!                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± App instalado recebe update             â”‚
â”‚  âœ… Novo cÃ³digo JS                          â”‚
â”‚  âš ï¸ Usa variÃ¡veis do BUILD ORIGINAL         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Se o build original tinha variÃ¡veis:      â”‚
â”‚  âœ… Update funciona normalmente             â”‚
â”‚                                              â”‚
â”‚  Se o build original NÃƒO tinha variÃ¡veis:  â”‚
â”‚  âš ï¸ Update vai usar valores padrÃ£o          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULTADO: Depende do build original
```

---

## ğŸ¯ Fluxo Completo Recomendado

```
1ï¸âƒ£ DESENVOLVIMENTO
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  npm start           â”‚
   â”‚  (usa .env)          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
   âœ… Testar no Expo Go


2ï¸âƒ£ PRIMEIRO BUILD
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  eas build           â”‚
   â”‚  (usa app.json)      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
   ğŸ“± APK com variÃ¡veis


3ï¸âƒ£ INSTALAR
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Instalar APK        â”‚
   â”‚  no celular          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
   âœ… Testar app instalado


4ï¸âƒ£ ATUALIZAÃ‡Ã•ES
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  eas update          â”‚
   â”‚  (herda variÃ¡veis)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
   âœ… Update OTA funciona


5ï¸âƒ£ SE MUDAR VARIÃVEL
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Editar app.json     â”‚
   â”‚  eas build (novo)    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
   ğŸ”„ Voltar para passo 3
```

---

## ğŸ“Š ComparaÃ§Ã£o de CenÃ¡rios

| O que vocÃª faz      | Arquivo usado  | Resultado       |
| ------------------- | -------------- | --------------- |
| `npm start`         | `.env`         | âœ… Funciona     |
| `eas build` (antes) | âŒ Nenhum      | âš ï¸ Usa fallback |
| `eas build` (agora) | `app.json`     | âœ… Funciona     |
| `eas update`        | Herda do build | âœ…/âš ï¸ Depende   |

---

## ğŸ”‘ Regras de Ouro

### 1. Expo Go = .env

```
npm start  â†’  lÃª .env  â†’  âœ…
```

### 2. EAS Build = app.json

```
eas build  â†’  lÃª app.json  â†’  âœ… (agora)
```

### 3. EAS Update = Herda do Build

```
eas update  â†’  nÃ£o muda variÃ¡veis  â†’  usa do build original
```

### 4. Mudar VariÃ¡vel = Novo Build

```
editar app.json  â†’  eas build  â†’  novo APK  â†’  âœ…
```

---

## ğŸ’¬ Exemplo PrÃ¡tico

### VocÃª quer mudar a API URL:

#### âŒ ERRADO:

```bash
# 1. Edita .env
EXPO_PUBLIC_API_URL=https://nova-api.com

# 2. Faz update
eas update --branch preview

# âŒ NÃƒO VAI FUNCIONAR!
# O app instalado ainda usa a URL antiga
```

#### âœ… CORRETO:

```bash
# 1. Edita app.json
{
  "extra": {
    "EXPO_PUBLIC_API_URL": "https://nova-api.com"
  }
}

# 2. Faz novo build
eas build --platform android --profile preview

# 3. Instala novo APK
# âœ… AGORA SIM! URL atualizada

# 4. PrÃ³ximos updates funcionam normalmente
eas update --branch preview
```

---

## ğŸ“ Resumo Final

### Para Expo Go:

- âœ… JÃ¡ estÃ¡ funcionando
- Usa `.env` automaticamente
- `npm start` e pronto!

### Para Build:

- âœ… Agora estÃ¡ configurado
- Usa `app.json`
- PrÃ³ximo build vai funcionar

### Para Updates:

- âš ï¸ Precisa fazer novo build primeiro
- Depois updates funcionam normalmente
- VariÃ¡veis vÃªm do build, nÃ£o do update

---

## ğŸ“ To-Do List

- [ ] Fazer novo build: `eas build --platform android --profile preview`
- [ ] Instalar APK no celular
- [ ] Testar se variÃ¡veis funcionam
- [ ] âœ… Depois pode usar `eas update` normalmente
